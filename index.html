<!-- Index.html -->
<!DOCTYPE html>
<html lang="en">

<head>
    <title>Pin Pad</title>
    <link rel="stylesheet"
        href="./style.css"/>
</head>

<body>
    <audio id="plantingsound" src="/sounds/plantingsound1.mp3" preload="auto"></audio>
    <audio id="planted" src="/sounds/planted2.mp3" preload="auto"></audio>
    <script type="text/javascript"> 
        // Script.js
// Correct Pin Value
let correctPin = "1234";

let btns =
    document.getElementsByClassName(
        "pinpad-btn"
    );
let pinInput = document.getElementById(
    "pinpad-input"
);

for (let i = 0; i < btns.length; i++) {
    let btn = btns.item(i);
    if (
        btn.id &&
        (btn.id === "submit-btn" ||
            btn.id === "delete-btn")
    )
        continue;

    // Add onclick event listener to 
    // Every button from 0 - 9
    btn.addEventListener(
        "click",
        (e) => {
            pinInput.value +=
                e.target.value;
        }
    );
}

let submitBtn = document.getElementById(
    "submit-btn"
);
let delBtn = document.getElementById(
    "delete-btn"
);
let modal =
    document.getElementById("modal");
let result =
    document.getElementById("result");
let closeBtn =
    document.getElementById("close");

submitBtn.addEventListener(
    "click",
    () => {
        if (
            !pinInput ||
            !pinInput.value ||
            pinInput.value === ""
        ) {
            alert(
                "Please enter the arming code first!"
            );
        } else if (
            pinInput.value ===
            correctPin
        ) {
            alert("Correct Arming Code");
            setTimout(function() {
                document.getElementById('plantingsound').play();
                alert("Planting...");
            }, 1000)
            setTimeout(function() {
                document.getElementById('planted').play(); 
            }, 3200)
        } else {
            alert("Incorrect PIN");
        }
        // Reset the input
        pinInput.value = "";
    }
);

delBtn.addEventListener("click", () => {
    if (pinInput.value)
        pinInput.value =
            pinInput.value.substr(
                0,
                pinInput.value.length -
                    1
            );
});

closeBtn.addEventListener(
    "click",
    () => {
        modal.style.display = "none";
    }
);
    </script>
    <h2 class="text-center">Pin Pad</h2>
    <div class="container">
        <div class="card">
            <div class="card-header">
                <input type="password"
                    id="pinpad-input"
                    readonly />
            </div>
            <div>
                <div class="row">
                    <button type="button"
                            class="pinpad-btn"
                            value="1">
                            1
                    </button>
                    <button type="button"
                            class="pinpad-btn"
                            value="2">
                            2
                    </button>
                    <button type="button"
                            class="pinpad-btn"
                            value="3">
                            3
                    </button>
                </div>
                <div class="row">
                    <button type="button"
                            class="pinpad-btn"
                            value="4">
                            4
                    </button>
                    <button type="button"
                            class="pinpad-btn"
                            value="5">
                            5
                    </button>
                    <button type="button"
                            class="pinpad-btn"
                            value="6">
                            6
                    </button>
                </div>
                <div class="row">
                    <button type="button"
                            class="pinpad-btn"
                            value="7">
                            7
                    </button>
                    <button type="button"
                            class="pinpad-btn"
                            value="8">
                            8
                    </button>
                    <button type="button"
                            class="pinpad-btn"
                            value="9">
                            9
                    </button>
                    
                </div>
                <div class="row">
                    <button type="button"
                            class="pinpad-btn"
                            value="del
                            "
                        id="delete-btn">
                        Del
                    </button>
                    <button type="button"
                            class="pinpad-btn"
                            value="0">
                            0
                    </button>
                    <button type="button"
                            class="pinpad-btn"
                            value="ok"
                            id="submit-btn">
                        Ok
                    </button>
                </div>
            </div>
        </div>

        <div id="modal" class="modal">
            <div class="modal-body">
                <span id="close">Ã—</span>
                <p id="result"></p>
            </div>
        </div>
    </div>
        <script src="./script.js"></script>
</body>

</html>
